(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{352:function(e,s,n){e.exports=n.p+"assets/img/docker-nginx1.b66595e4.png"},353:function(e,s,n){e.exports=n.p+"assets/img/docker-nginx2.5c984bcd.png"},382:function(e,s,n){"use strict";n.r(s);var a=n(25),t=Object(a.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"docker-nginx-实践-mac-版"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-nginx-实践-mac-版"}},[e._v("#")]),e._v(" Docker + Nginx 实践 (mac 版)")]),e._v(" "),a("p",[e._v("本篇文章的主要内容就是在 docker 中跑 nginx")]),e._v(" "),a("p",[e._v("环境： Mac + docker")]),e._v(" "),a("h3",{attrs:{id:"镜像安装-运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像安装-运行"}},[e._v("#")]),e._v(" 镜像安装+运行")]),e._v(" "),a("p",[e._v("首先下载 nginx 镜像")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://hub.docker.com/_/nginx",target:"_blank",rel:"noopener noreferrer"}},[e._v("Nginx"),a("OutboundLink")],1),e._v("，我这里 下载的是 nginx 1.19 版本的，通常不下 latest 标签版本的，因为还没有稳定。")]),e._v(" "),a("p",[e._v("下载命令")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("docker pull nginx:1.19\n")])])]),a("p",[e._v("查看本地的镜像")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("docker images\n")])])]),a("p",[e._v("首次运行 nginx 镜像，使用 docker run 命令创建一个 nginx 容器，-p 参数是把 nginx 的默认端口号映射到本机的 9091 端口，这样就可以在本机的 localhost:9092 访问到 nginx 页面了， -d 表示在后台运行，最后加上镜像的名称+标签号，或者使用镜像 ID 也可以")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("docker run -p "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("9092")]),e._v(":80 -d nginx:1.19\n")])])]),a("p",[e._v("成功执行后，访问http://localhost:9092/ 应该就可以看到 nginx 的欢迎页面")]),e._v(" "),a("p",[a("img",{attrs:{src:n(352),alt:"image-20200608090716580"}})]),e._v(" "),a("h3",{attrs:{id:"从-docker-容器中拷贝文件到本机"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从-docker-容器中拷贝文件到本机"}},[e._v("#")]),e._v(" 从 docker 容器中拷贝文件到本机")]),e._v(" "),a("p",[e._v("在容器和本机之间能进行文件的交流应该是基本需求，docker 也提供了这样的命令，就是 docker cp")]),e._v(" "),a("p",[e._v("比如我们想把容器中 nginx 的配置文件拷贝到本机中的某一个路径中，可以这样写")]),e._v(" "),a("p",[e._v("首先查看运行的 nginx 容器的 ID， docker ps 命令的作用是列出所有正在运行的容器，如果要列出包含已停止、已退出的容器，再在后面加上-a。")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("docker "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("ps")]),e._v("\n")])])]),a("p",[a("img",{attrs:{src:n(353),alt:"image-20200608092241011"}})]),e._v(" "),a("p",[e._v("运行 docker cp 命令 container:path 本地 path")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("docker "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("cp")]),e._v(" a86e916389e3:/etc/nginx/nginx.conf ~/Desktop/demos\n")])])]),a("p",[e._v("这样我们在本地在本地就拷贝了一份 nginx 配置文件。")]),e._v(" "),a("h3",{attrs:{id:"将本地文件夹挂载到容器内部文件夹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#将本地文件夹挂载到容器内部文件夹"}},[e._v("#")]),e._v(" 将本地文件夹挂载到容器内部文件夹")]),e._v(" "),a("p",[e._v("将本地文件夹或者文件挂载到容器内部，方便我们随时调试，因为我们修改了本地文件，重启容器，容器就能读取到更新的内容。可以想象成容器内部文件夹有一个指针，指向了我们本地的文件夹，所以我们本地的变化，容器内部也能同步更新。使用-v 参数进行文件夹的挂载，前面的是本地的路径，后面的是容器内部的路径。")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("## 映射容器目录")]),e._v("\ndocker run -d -p "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("9091")]),e._v(":80 --name nginx -v ~/Desktop/demos/server/nginx/www:/usr/share/nginx/html -v ~/Desktop/demos/server/nginx/conf/nginx.conf:/etc/nginx/nginx.conf -v ~/Desktop/demos/server/nginx/log:/var/log/nginx nginx:1.19\n")])])]),a("p",[e._v("再在~/Desktop/demos/server/nginx/www 文件夹下创建一个 index.html 文件，浏览器访问 localhost:9091 就能看到 index.html 的内容了。")]),e._v(" "),a("p",[e._v("接下来可以尝试更改 nginx 的配置，实验各种配置参数，进一步了解 nginx。")])])}),[],!1,null,null,null);s.default=t.exports}}]);