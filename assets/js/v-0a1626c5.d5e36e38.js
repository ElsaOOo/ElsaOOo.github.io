(self.webpackChunkmy_blog_next=self.webpackChunkmy_blog_next||[]).push([[417],{8853:(e,s,n)=>{"use strict";n.r(s),n.d(s,{data:()=>r});const r={key:"v-0a1626c5",path:"/posts/script-async-defer.html",title:"面试题之 script 标签中 async 和 defer 属性的区别",lang:"zh-CN",frontmatter:{description:"面试题之 script标签中async和defer属性的区别"},excerpt:"",headers:[{level:3,title:"async",slug:"async",children:[]},{level:3,title:"defer",slug:"defer",children:[]}],filePathRelative:"posts/script-async-defer.md",git:{updatedTime:1617441033e3,contributors:[]}}},7426:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>b});var r=n(6252);const a=n.p+"assets/img/script-async.c2889625.png",l=n.p+"assets/img/script-defer.c7db4b80.png",c=(0,r.Wm)("h1",{id:"面试题之-script-标签中-async-和-defer-属性的区别"},[(0,r.Wm)("a",{class:"header-anchor",href:"#面试题之-script-标签中-async-和-defer-属性的区别"},"#"),(0,r.Uk)(" 面试题之 script 标签中 async 和 defer 属性的区别")],-1),t=(0,r.Wm)("p",null,[(0,r.Uk)("最近在做网页性能优化方面的东西，用 chrome devTools 的性能检测工具 lighthouse 跑了一遍后，发现其中有一项是"),(0,r.Wm)("strong",null,"Efficiently load third-party JavaScript"),(0,r.Uk)("，就是我们在项目中用 script 标签引用的第三方库。")],-1),m=(0,r.Wm)("p",null,"首先我们应该把这个 script 标签写在 body 里面，这样浏览器在加载 html 文档的时候就不会去解析 js，这样会阻止 html 的渲染。",-1),p=(0,r.Wm)("p",null,"怎么优化加载第三方脚本？",-1),i=(0,r.Wm)("p",null,[(0,r.Uk)("其中一种方式就是在 script 标签上加上"),(0,r.Wm)("code",null,"async"),(0,r.Uk)(" 或者 "),(0,r.Wm)("code",null,"defer"),(0,r.Uk)("属性。")],-1),d=(0,r.Wm)("p",null,"像这样：",-1),o=(0,r.Wm)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,r.Wm)("pre",{class:"language-javascript"},[(0,r.Wm)("code",null,[(0,r.Wm)("span",{class:"token operator"},"<"),(0,r.Uk)("script "),(0,r.Wm)("span",{class:"token keyword"},"async"),(0,r.Uk)(" src"),(0,r.Wm)("span",{class:"token operator"},"="),(0,r.Wm)("span",{class:"token string"},'"script.js"'),(0,r.Wm)("span",{class:"token operator"},">"),(0,r.Uk)("\n\n"),(0,r.Wm)("span",{class:"token operator"},"<"),(0,r.Uk)("script defer src"),(0,r.Wm)("span",{class:"token operator"},"="),(0,r.Wm)("span",{class:"token string"},'"script.js"'),(0,r.Wm)("span",{class:"token operator"},">"),(0,r.Uk)("\n")])]),(0,r.Wm)("div",{class:"line-numbers"},[(0,r.Wm)("span",{class:"line-number"},"1"),(0,r.Wm)("br"),(0,r.Wm)("span",{class:"line-number"},"2"),(0,r.Wm)("br"),(0,r.Wm)("span",{class:"line-number"},"3"),(0,r.Wm)("br")])],-1),W=(0,r.Wm)("h3",{id:"async"},[(0,r.Wm)("a",{class:"header-anchor",href:"#async"},"#"),(0,r.Uk)(" async")],-1),u=(0,r.Wm)("p",null,"async 属性的执行是在脚本下载完之后，在 window 的 load 事件发生之前。如果这个时候文档还没有解析完全意味着它们可以阻止 DOM 构建。",-1),f=(0,r.Wm)("p",null,[(0,r.Wm)("img",{src:a,alt:"script-async"})],-1),k=(0,r.Wm)("h3",{id:"defer"},[(0,r.Wm)("a",{class:"header-anchor",href:"#defer"},"#"),(0,r.Uk)(" defer")],-1),h=(0,r.Wm)("p",null,"defer 属性的执行是在文档完全解析完成后进行的，在 window 的 DOMContentLoaded 事件之前。defer 属性就可以保证它们执行是按照它们出现在 HTML 中的顺序来的，并且不会阻止主线程的渲染。",-1),y=(0,r.Wm)("p",null,[(0,r.Wm)("img",{src:l,alt:"script-defer"})],-1),g=(0,r.Wm)("ul",null,[(0,r.Wm)("li",null,[(0,r.Uk)("如果这个脚本在加载早期要执行就可以用"),(0,r.Wm)("code",null,"async")]),(0,r.Wm)("li",null,[(0,r.Uk)("如果这个脚本没那么重要就可以使用"),(0,r.Wm)("code",null,"defer")])],-1),b={render:function(e,s){return(0,r.wg)(),(0,r.j4)(r.HY,null,[c,t,m,p,i,d,o,W,u,f,k,h,y,g],64)}}}}]);