(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{354:function(s,t,r){s.exports=r.p+"assets/img/script-async.519b46b1.png"},355:function(s,t,r){s.exports=r.p+"assets/img/script-defer.804b7066.png"},385:function(s,t,r){"use strict";r.r(t);var a=r(25),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"面试题之-script-标签中-async-和-defer-属性的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#面试题之-script-标签中-async-和-defer-属性的区别"}},[s._v("#")]),s._v(" 面试题之 script 标签中 async 和 defer 属性的区别")]),s._v(" "),a("p",[s._v("最近在做网页性能优化方面的东西，用 chrome devTools 的性能检测工具 lighthouse 跑了一遍后，发现其中有一项是"),a("strong",[s._v("Efficiently load third-party JavaScript")]),s._v("，就是我们在项目中用 script 标签引用的第三方库。")]),s._v(" "),a("p",[s._v("首先我们应该把这个 script 标签写在 body 里面，这样浏览器在加载 html 文档的时候就不会去解析 js，这样会阻止 html 的渲染。")]),s._v(" "),a("p",[s._v("怎么优化加载第三方脚本？")]),s._v(" "),a("p",[s._v("其中一种方式就是在 script 标签上加上"),a("code",[s._v("async")]),s._v(" 或者 "),a("code",[s._v("defer")]),s._v("属性。")]),s._v(" "),a("p",[s._v("像这样：")]),s._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("script "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" src"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"script.js"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("script defer src"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"script.js"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),a("h3",{attrs:{id:"async"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#async"}},[s._v("#")]),s._v(" async")]),s._v(" "),a("p",[s._v("async 属性的执行是在脚本下载完之后，在 window 的 load 事件发生之前。如果这个时候文档还没有解析完全意味着它们可以阻止 DOM 构建。")]),s._v(" "),a("p",[a("img",{attrs:{src:r(354),alt:"script-async"}})]),s._v(" "),a("h3",{attrs:{id:"defer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#defer"}},[s._v("#")]),s._v(" defer")]),s._v(" "),a("p",[s._v("defer 属性的执行是在文档完全解析完成后进行的，在 window 的 DOMContentLoaded 事件之前。defer 属性就可以保证它们执行是按照它们出现在 HTML 中的顺序来的，并且不会阻止主线程的渲染。")]),s._v(" "),a("p",[a("img",{attrs:{src:r(355),alt:"script-defer"}})]),s._v(" "),a("ul",[a("li",[s._v("如果这个脚本在加载早期要执行就可以用"),a("code",[s._v("async")])]),s._v(" "),a("li",[s._v("如果这个脚本没那么重要就可以使用"),a("code",[s._v("defer")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);