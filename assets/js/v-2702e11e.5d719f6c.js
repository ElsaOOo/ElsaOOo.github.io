(self.webpackChunkmy_blog_next=self.webpackChunkmy_blog_next||[]).push([[71],{4517:(e,r,s)=>{"use strict";s.r(r),s.d(r,{data:()=>l});const l={key:"v-2702e11e",path:"/javascript/script-async-defer.html",title:"面试题之 script 标签中 async 和 defer 属性的区别",lang:"zh-CN",frontmatter:{description:"面试题之 script标签中async和defer属性的区别"},excerpt:"",headers:[{level:3,title:"async",slug:"async",children:[]},{level:3,title:"defer",slug:"defer",children:[]}]}},2771:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>b});var l=s(6252);const n=s.p+"assets/img/script-async.c2889625.png",a=s.p+"assets/img/script-defer.c7db4b80.png",c=(0,l.Wm)("h1",{id:"面试题之-script-标签中-async-和-defer-属性的区别",tabindex:"-1"},[(0,l.Wm)("a",{class:"header-anchor",href:"#面试题之-script-标签中-async-和-defer-属性的区别","aria-hidden":"true"},"#"),(0,l.Uk)(" 面试题之 script 标签中 async 和 defer 属性的区别")],-1),t=(0,l.Wm)("p",null,[(0,l.Uk)("最近在做网页性能优化方面的东西，用 chrome devTools 的性能检测工具 lighthouse 跑了一遍后，发现其中有一项是"),(0,l.Wm)("strong",null,"Efficiently load third-party JavaScript"),(0,l.Uk)("，就是我们在项目中用 script 标签引用的第三方库。")],-1),d=(0,l.Wm)("p",null,"首先我们应该把这个 script 标签写在 body 里面，这样浏览器在加载 html 文档的时候就不会去解析 js，这样会阻止 html 的渲染。",-1),i=(0,l.Wm)("p",null,"怎么优化加载第三方脚本？",-1),p=(0,l.Wm)("p",null,[(0,l.Uk)("其中一种方式就是在 script 标签上加上"),(0,l.Wm)("code",null,"async"),(0,l.Uk)(" 或者 "),(0,l.Wm)("code",null,"defer"),(0,l.Uk)("属性。")],-1),m=(0,l.Wm)("p",null,"像这样：",-1),u=(0,l.Wm)("div",{class:"language-javascript ext-js"},[(0,l.Wm)("pre",{class:"language-javascript"},[(0,l.Wm)("code",null,'<script async src="script.js">\n\n<script defer src="script.js">\n')])],-1),h=(0,l.Wm)("h3",{id:"async",tabindex:"-1"},[(0,l.Wm)("a",{class:"header-anchor",href:"#async","aria-hidden":"true"},"#"),(0,l.Uk)(" async")],-1),f=(0,l.Wm)("p",null,"async 属性的执行是在脚本下载完之后，在 window 的 load 事件发生之前。如果这个时候文档还没有解析完全意味着它们可以阻止 DOM 构建。",-1),W=(0,l.Wm)("p",null,[(0,l.Wm)("img",{src:n,alt:"script-async"})],-1),o=(0,l.Wm)("h3",{id:"defer",tabindex:"-1"},[(0,l.Wm)("a",{class:"header-anchor",href:"#defer","aria-hidden":"true"},"#"),(0,l.Uk)(" defer")],-1),y=(0,l.Wm)("p",null,"defer 属性的执行是在文档完全解析完成后进行的，在 window 的 DOMContentLoaded 事件之前。defer 属性就可以保证它们执行是按照它们出现在 HTML 中的顺序来的，并且不会阻止主线程的渲染。",-1),g=(0,l.Wm)("p",null,[(0,l.Wm)("img",{src:a,alt:"script-defer"})],-1),k=(0,l.Wm)("ul",null,[(0,l.Wm)("li",null,[(0,l.Uk)("如果这个脚本在加载早期要执行就可以用"),(0,l.Wm)("code",null,"async")]),(0,l.Wm)("li",null,[(0,l.Uk)("如果这个脚本没那么重要就可以使用"),(0,l.Wm)("code",null,"defer")])],-1),b={render:function(e,r){return(0,l.wg)(),(0,l.j4)(l.HY,null,[c,t,d,i,p,m,u,h,f,W,o,y,g,k],64)}}}}]);