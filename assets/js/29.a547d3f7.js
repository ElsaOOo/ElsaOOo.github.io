(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{389:function(t,a,s){"use strict";s.r(a);var n=s(25),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"react-memo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-memo"}},[t._v("#")]),t._v(" React.memo")]),t._v(" "),s("p",[s("em",[t._v("æ–‡ç« å¼•ç”¨è¯·æ³¨æ˜å‡ºå¤„")])]),t._v(" "),s("p",[t._v("React.memo æ˜¯ React çš„é¡¶å±‚ API ä¹‹ä¸€ï¼ŒReact.memo å…¶å®æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œå®ƒå’Œ React.PureComponent éå¸¸ç›¸ä¼¼ï¼Œä½†æ˜¯"),s("strong",[t._v("åªé€‚ç”¨äºå‡½æ•°ç»„ä»¶")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("å¦‚æœæ‰€ç”¨çš„å‡½æ•°ç»„ä»¶åœ¨ç»™å®šç›¸åŒ props çš„æƒ…å†µä¸‹æ¸²æŸ“ç›¸åŒçš„ç»“æœï¼Œè¿™æ—¶å€™å¯ä»¥ä½¿ç”¨ React.memoï¼Œæ¥"),s("strong",[t._v("è®°å¿†")]),t._v("ç»„ä»¶æ¸²æŸ“ç»“æœçš„æ–¹å¼ä»è€Œæé«˜ç»„ä»¶çš„æ€§èƒ½è¡¨ç°ã€‚ä½¿ç”¨ React.memoï¼ŒReact å°†è·³è¿‡æ¸²æŸ“ç»„ä»¶çš„æ“ä½œå¹¶ç›´æ¥å¤ç”¨æœ€è¿‘ä¸€æ¬¡æ¸²æŸ“çš„ç»“æœã€‚")]),t._v(" "),s("p",[t._v("ä½†æ˜¯ï¼ŒReact.memo ä»…æ£€æŸ¥ props çš„å˜æ›´ï¼Œå¦‚æœå‡½æ•°ç»„ä»¶è¢«"),s("code",[t._v("React.memo")]),t._v("åŒ…è£¹ï¼Œä¸”å…¶å®ç°ä¸­æ‹¥æœ‰"),s("code",[t._v("useState")]),t._v("æˆ–"),s("code",[t._v("useContext")]),t._v("çš„ hookï¼Œå½“ context å˜åŒ–æ—¶ï¼Œå®ƒä»ä¼šé‡æ–°æ¸²æŸ“ã€‚")]),t._v(" "),s("p",[t._v("é»˜è®¤æƒ…å†µä¸‹å…¶åªä¼š"),s("strong",[t._v("å¯¹å¤æ‚å¯¹è±¡åšæµ…å±‚å¯¹æ¯”")]),t._v("ï¼Œå¦‚æœä½ æƒ³è¦æ§åˆ¶å¯¹æ¯”è¿‡ç¨‹ï¼Œé‚£ä¹ˆè¯·å°†è‡ªå®šä¹‰çš„æ¯”è¾ƒå‡½æ•°é€šè¿‡ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥æ¥å®ç°ã€‚")]),t._v(" "),s("h3",{attrs:{id:"æºç "}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æºç "}},[t._v("#")]),t._v(" æºç ")]),t._v(" "),s("p",[s("code",[t._v("memo")]),t._v(" çš„ä½ç½®åœ¨ packages/react/src/memo.js ä¸­")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" memo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Props"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" React$ElementType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  compare"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("oldProps"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newProps"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Props")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" boolean\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__DEV__"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    $$"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("REACT_MEMO_TYPE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    compare"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" compare "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" compare"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("memo çš„å®šä¹‰å¾ˆç®€å•ï¼Œä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ React ç»„ä»¶ï¼Œç¬¬äºŒä¸ªæ˜¯ä¸€ä¸ªæ¯”è¾ƒå‡½æ•°ï¼Œå‡½æ•°å‚æ•°æ˜¯æ—§çš„ props å’Œæ–°çš„ propsï¼Œè¿”å›å€¼æ˜¯ booleanï¼Œå¦‚æœä¸º true è¡¨ç¤ºè¯¥ç»„ä»¶ä¸éœ€è¦é‡æ–°æ¸²æŸ“ï¼Œå¦‚æœä¸º false è¡¨ç¤ºé‡æ–°æ¸²æŸ“è¯¥ç»„ä»¶ã€‚")]),t._v(" "),s("h3",{attrs:{id:"é‚£è¿™ä¸ªå’Œ-react-usememo-æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é‚£è¿™ä¸ªå’Œ-react-usememo-æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ"}},[t._v("#")]),t._v(" é‚£è¿™ä¸ªå’Œ React.useMemo æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ")]),t._v(" "),s("p",[t._v("æ²¡ä»€ä¹ˆå…³ç³»ï¼")]),t._v(" "),s("p",[t._v("å› ä¸ºè¿™ä¸¤ä¸ª api é‡Œé¢éƒ½æœ‰ memoï¼Œæˆ‘åˆšå¼€å§‹è¿˜ä»¥ä¸ºå®ƒä»¬ä¹‹é—´æœ‰ä»€ä¹ˆè”ç³»ï¼Œä½†æ˜¯ä»–ä¸¤çš„ç”¨å¤„æ˜¯ä¸åŒçš„ã€‚")]),t._v(" "),s("p",[s("code",[t._v("useMemo")]),t._v(" çš„æºç åœ¨ packages/react/src/ReactHooks.js æ–‡ä»¶ä¸­ï¼Œ")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useMemo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" mixed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  inputs"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Array"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("mixed"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dispatcher "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveDispatcher")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" dispatcher"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useMemo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("create"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" inputs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("code",[t._v("useMemo")]),t._v(" å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ ä½¿ç”¨å‰ä¸€ä¸ªå‡½æ•°æ‰€æ¶‰åŠåˆ°çš„ä¸€äº›ä¾èµ–é¡¹ã€‚")]),t._v(" "),s("p",[s("code",[t._v("useCallback")]),t._v(" çš„å®šä¹‰å’Œè¿™ä¸ªå¾ˆåƒï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useCallback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("callback")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" mixed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  inputs"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Array"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("mixed"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dispatcher "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveDispatcher")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" dispatcher"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useCallback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" inputs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("ä»–ä¿©å®šä¹‰æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å‡½æ•°ç­¾åæœ‰ä¸€ç‚¹ä¸åŒï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("useCallback"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callback"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deps"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Array"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("mixed"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\nuseMemo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("nextCreate")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deps"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Array"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("mixed"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),s("p",[s("code",[t._v("useCallback")]),t._v(" å’Œ "),s("code",[t._v("useMemo")]),t._v(" éƒ½å¯ç¼“å­˜å‡½æ•°çš„å¼•ç”¨æˆ–å€¼ï¼Œä½†ä»æ›´ç»†çš„ä½¿ç”¨è§’åº¦æ¥è¯´ï¼Œ"),s("code",[t._v("useCallback")]),t._v(" ç¼“å­˜å‡½æ•°çš„å¼•ç”¨ï¼Œ"),s("code",[t._v("useMemo")]),t._v(" ç¼“å­˜è®¡ç®—æ•°æ®çš„å€¼ã€‚")]),t._v(" "),s("h3",{attrs:{id:"å®ä¾‹-ğŸŒ°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®ä¾‹-ğŸŒ°"}},[t._v("#")]),t._v(" å®ä¾‹ ğŸŒ°")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('// çˆ¶ç»„ä»¶\nconst App = () => {\n  const [count, setCount] = useState(0);\n  const [count2, setCount2] = useState(0);\n  const handleClick = () => {\n    setCount(count + 1);\n  };\n  const handleClick2 = () => {\n    setCount2(count2 + 1);\n  };\n  return (\n    <div className="app">\n      <div className="header">Header</div>\n      <div className="content">\n        <div className="row">\n          <div>count1: {count}</div>\n          <div>count2: {count2}</div>\n          <div>\n            <button onClick={handleClick}>count</button>\n            <button onClick={handleClick2}>count2</button>\n          </div>\n          <Child />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n\n// å­ç»„ä»¶\nconst Child = () => {\n  console.log("render child");\n  return <div>child</div>;\n};\n\nexport default React.memo(Child);\n')])])]),s("p",[t._v("è¿™é‡Œçš„å­ç»„ä»¶ Child å¦‚æœæ²¡æœ‰ç”¨ React.memo åŒ…è£¹ï¼Œé‚£ä¹ˆçˆ¶ç»„ä»¶æ¯ä¸€æ¬¡æ”¹å˜è‡ªèº«çš„ stateï¼ŒChild ç»„ä»¶éƒ½ä¼šè·Ÿç€æ¸²æŸ“ä¸€æ¬¡ã€‚åŠ ä¸Š React.memo ä¹‹åï¼Œå¦‚æœæ²¡æœ‰é¢å¤–ä¼ å…¥ props çš„æƒ…å†µä¸‹ï¼ŒChild ç»„ä»¶åªä¼šæ¸²æŸ“ç¬¬ä¸€æ¬¡ï¼Œéšåçˆ¶ç»„ä»¶è‡ªèº« state çš„æ”¹å˜å¹¶ä¸ä¼šå½±å“å­ç»„ä»¶çš„æ¸²æŸ“ã€‚ã€")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("<Child parentCount={count} />\n")])])]),s("p",[t._v("è¿™é‡Œçš„å­ç»„ä»¶æ¥æ”¶çˆ¶ç»„ä»¶çš„ä¸€ä¸ª propï¼Œè¿™æ—¶å€™çˆ¶ç»„ä»¶çš„ count å˜é‡æ¯æ”¹å˜ä¸€æ¬¡å­ç»„ä»¶ä¹Ÿä¼šè·Ÿç€æ¸²æŸ“ä¸€æ¬¡ï¼Œä½†æ˜¯çˆ¶ç»„ä»¶çš„å…¶ä»– state å˜é‡çš„æ”¹å˜ä¸ä¼šå¼•èµ· Child ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ï¼Œè¿™é‡Œåªè·Ÿä¼ å…¥å­ç»„ä»¶çš„å˜é‡ç›¸å…³ã€‚ æ‰€ä»¥å°½é‡å­ç»„ä»¶ç”¨åˆ°ä»€ä¹ˆ prop å°±ä¼ ä»€ä¹ˆ propï¼Œä¸è¦ç”¨...props è¿™æ ·çš„å½¢å¼æŠŠæ‰€æœ‰çš„éƒ½ä¼ ç»™å­ç»„ä»¶ã€‚")]),t._v(" "),s("p",[t._v("ä½†æ˜¯å¾ˆå¤šæƒ…å†µä¸‹ï¼Œçˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶çš„ä¸ä¼šç®€å•å°±æ˜¯ä¸€ä¸ªåŸºç¡€ç±»å‹çš„å€¼ï¼Œæ›´å¤šçš„æ˜¯ä¸€ä¸ªæ•°ç»„æˆ–è€…ä¸€ä¸ªå¯¹è±¡ã€‚")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('const App = () => {\n  const [value, setValue] = useState({\n    name: "tom",\n    age: 20,\n  });\n  const handleClick = () => {\n    setValue((prev) => ({\n      ...prev,\n      age: prev.age + 1,\n    }));\n  };\n  return (\n    <div className="app">\n      <div className="header">Header</div>\n      <div className="content">\n        <div className="row">\n          <div>value: {JSON.stringify(value)}</div>\n          <div>\n            <button onClick={handleClick}>changeValue</button>\n          </div>\n          <Child parentValue={value} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n')])])]),s("p",[t._v("è¿™æ—¶å€™æ¯æ”¹å˜ä¸€æ¬¡ value ä¸­çš„æŸä¸ªå±æ€§çš„å€¼ï¼Œå­ç»„ä»¶å°±ä¼šæ¸²æŸ“ä¸€æ¬¡ï¼Œå¦‚ç¤ºä¾‹ä¸­æ‰€ç¤ºï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦å­ç»„ä»¶çš„æ¸²æŸ“å’Œçˆ¶ç»„ä»¶çš„ age å±æ€§çš„æ”¹å˜æ— å…³çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ React.memo ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œæ˜¯ä¸€ä¸ªå‡½æ•°ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("type "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("compare")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("oldProps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newProps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" boolean"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("æ ¹æ®è¿™ä¸ª compare å‡½æ•°çš„è¿”å›å€¼æ¥åˆ¤æ–­è¦ä¸è¦æ¸²æŸ“å­ç»„ä»¶ï¼Œtrue å°±ä¸æ¸²æŸ“ï¼Œfalse å°±æ¸²æŸ“ã€‚")])])}),[],!1,null,null,null);a.default=e.exports}}]);