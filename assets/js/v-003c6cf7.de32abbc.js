(self.webpackChunkmy_blog_next=self.webpackChunkmy_blog_next||[]).push([[886],{7541:(n,e,l)=>{"use strict";l.r(e),l.d(e,{data:()=>a});const a={key:"v-003c6cf7",path:"/posts/docker-nginx.html",title:"",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"Docker + Nginx 实践 (mac 版)",slug:"docker-nginx-实践-mac-版",children:[{level:3,title:"镜像安装+运行",slug:"镜像安装-运行",children:[]},{level:3,title:"从 docker 容器中拷贝文件到本机",slug:"从-docker-容器中拷贝文件到本机",children:[]},{level:3,title:"将本地文件夹挂载到容器内部文件夹",slug:"将本地文件夹挂载到容器内部文件夹",children:[]}]}]}},3714:(n,e,l)=>{"use strict";l.r(e),l.d(e,{default:()=>Y});var a=l(6252);const s=l.p+"assets/img/docker-nginx1.c487f67d.png",r=l.p+"assets/img/docker-nginx2.9c5eda05.png",c=(0,a.Wm)("h2",{id:"docker-nginx-实践-mac-版",tabindex:"-1"},[(0,a.Wm)("a",{class:"header-anchor",href:"#docker-nginx-实践-mac-版","aria-hidden":"true"},"#"),(0,a.Uk)(" Docker + Nginx 实践 (mac 版)")],-1),i=(0,a.Wm)("p",null,"本篇文章的主要内容就是在 docker 中跑 nginx",-1),g=(0,a.Wm)("p",null,"环境： Mac + docker",-1),d=(0,a.Wm)("h3",{id:"镜像安装-运行",tabindex:"-1"},[(0,a.Wm)("a",{class:"header-anchor",href:"#镜像安装-运行","aria-hidden":"true"},"#"),(0,a.Uk)(" 镜像安装+运行")],-1),m=(0,a.Wm)("p",null,"首先下载 nginx 镜像",-1),o={href:"https://hub.docker.com/_/nginx",target:"_blank",rel:"noopener noreferrer"},t=(0,a.Uk)("Nginx"),h=(0,a.Uk)("，我这里 下载的是 nginx 1.19 版本的，通常不下 latest 标签版本的，因为还没有稳定。"),u=(0,a.Wm)("p",null,"下载命令",-1),p=(0,a.Wm)("div",{class:"language-bash ext-sh"},[(0,a.Wm)("pre",{class:"language-bash"},[(0,a.Wm)("code",null,"docker pull nginx:1.19\n")])],-1),x=(0,a.Wm)("p",null,"查看本地的镜像",-1),W=(0,a.Wm)("div",{class:"language-bash ext-sh"},[(0,a.Wm)("pre",{class:"language-bash"},[(0,a.Wm)("code",null,"docker images\n")])],-1),k=(0,a.Wm)("p",null,"首次运行 nginx 镜像，使用 docker run 命令创建一个 nginx 容器，-p 参数是把 nginx 的默认端口号映射到本机的 9091 端口，这样就可以在本机的 localhost:9092 访问到 nginx 页面了， -d 表示在后台运行，最后加上镜像的名称+标签号，或者使用镜像 ID 也可以",-1),b=(0,a.Wm)("div",{class:"language-bash ext-sh"},[(0,a.Wm)("pre",{class:"language-bash"},[(0,a.Wm)("code",null,"docker run -p 9092:80 -d nginx:1.19\n")])],-1),v=(0,a.Wm)("p",null,"成功执行后，访问http://localhost:9092/ 应该就可以看到 nginx 的欢迎页面",-1),f=(0,a.Wm)("p",null,[(0,a.Wm)("img",{src:s,alt:"image-20200608090716580"})],-1),w=(0,a.Wm)("h3",{id:"从-docker-容器中拷贝文件到本机",tabindex:"-1"},[(0,a.Wm)("a",{class:"header-anchor",href:"#从-docker-容器中拷贝文件到本机","aria-hidden":"true"},"#"),(0,a.Uk)(" 从 docker 容器中拷贝文件到本机")],-1),D=(0,a.Wm)("p",null,"在容器和本机之间能进行文件的交流应该是基本需求，docker 也提供了这样的命令，就是 docker cp",-1),U=(0,a.Wm)("p",null,"比如我们想把容器中 nginx 的配置文件拷贝到本机中的某一个路径中，可以这样写",-1),_=(0,a.Wm)("p",null,"首先查看运行的 nginx 容器的 ID， docker ps 命令的作用是列出所有正在运行的容器，如果要列出包含已停止、已退出的容器，再在后面加上-a。",-1),N=(0,a.Wm)("div",{class:"language-bash ext-sh"},[(0,a.Wm)("pre",{class:"language-bash"},[(0,a.Wm)("code",null,"docker ps\n")])],-1),y=(0,a.Wm)("p",null,[(0,a.Wm)("img",{src:r,alt:"image-20200608092241011"})],-1),C=(0,a.Wm)("p",null,"运行 docker cp 命令 container:path 本地 path",-1),I=(0,a.Wm)("div",{class:"language-bash ext-sh"},[(0,a.Wm)("pre",{class:"language-bash"},[(0,a.Wm)("code",null,"docker cp a86e916389e3:/etc/nginx/nginx.conf ~/Desktop/demos\n")])],-1),j=(0,a.Wm)("p",null,"这样我们在本地在本地就拷贝了一份 nginx 配置文件。",-1),z=(0,a.Wm)("h3",{id:"将本地文件夹挂载到容器内部文件夹",tabindex:"-1"},[(0,a.Wm)("a",{class:"header-anchor",href:"#将本地文件夹挂载到容器内部文件夹","aria-hidden":"true"},"#"),(0,a.Uk)(" 将本地文件夹挂载到容器内部文件夹")],-1),H=(0,a.Wm)("p",null,"将本地文件夹或者文件挂载到容器内部，方便我们随时调试，因为我们修改了本地文件，重启容器，容器就能读取到更新的内容。可以想象成容器内部文件夹有一个指针，指向了我们本地的文件夹，所以我们本地的变化，容器内部也能同步更新。使用-v 参数进行文件夹的挂载，前面的是本地的路径，后面的是容器内部的路径。",-1),L=(0,a.Wm)("div",{class:"language-bash ext-sh"},[(0,a.Wm)("pre",{class:"language-bash"},[(0,a.Wm)("code",null,"## 映射容器目录\ndocker run -d -p 9091:80 --name nginx -v ~/Desktop/demos/server/nginx/www:/usr/share/nginx/html -v ~/Desktop/demos/server/nginx/conf/nginx.conf:/etc/nginx/nginx.conf -v ~/Desktop/demos/server/nginx/log:/var/log/nginx nginx:1.19\n")])],-1),M=(0,a.Wm)("p",null,"再在~/Desktop/demos/server/nginx/www 文件夹下创建一个 index.html 文件，浏览器访问 localhost:9091 就能看到 index.html 的内容了。",-1),O=(0,a.Wm)("p",null,"接下来可以尝试更改 nginx 的配置，实验各种配置参数，进一步了解 nginx。",-1),Y={render:function(n,e){const l=(0,a.up)("OutboundLink");return(0,a.wg)(),(0,a.j4)(a.HY,null,[c,i,g,d,m,(0,a.Wm)("p",null,[(0,a.Wm)("a",o,[t,(0,a.Wm)(l)]),h]),u,p,x,W,k,b,v,f,w,D,U,_,N,y,C,I,j,z,H,L,M,O],64)}}}}]);